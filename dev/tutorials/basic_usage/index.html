<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic usage · TimeStruct</title><meta name="title" content="Basic usage · TimeStruct"/><meta property="og:title" content="Basic usage · TimeStruct"/><meta property="twitter:title" content="Basic usage · TimeStruct"/><meta name="description" content="Documentation for TimeStruct."/><meta property="og:description" content="Documentation for TimeStruct."/><meta property="twitter:description" content="Documentation for TimeStruct."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TimeStruct</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Basic usage</a><ul class="internal"><li><a class="tocitem" href="#Time-structures-and-time-profiles"><span>Time structures and time profiles</span></a></li><li><a class="tocitem" href="#Optimization-modeling"><span>Optimization modeling</span></a></li><li><a class="tocitem" href="#Multiple-horizon-modeling"><span>Multiple horizon modeling</span></a></li></ul></li><li><a class="tocitem" href="../battery_sizing/">Battery sizing</a></li></ul></li><li><span class="tocitem">Showcases</span><ul><li><a class="tocitem" href="../../showcases/emx/">EnergyModelsX</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/basic/">Operational time structures</a></li><li><a class="tocitem" href="../../manual/multi/">Multi-horizon</a></li><li><a class="tocitem" href="../../manual/profiles/">Time profiles</a></li><li><a class="tocitem" href="../../manual/iteration/">Iteration utilities</a></li><li><a class="tocitem" href="../../manual/discount/">Discounting</a></li></ul></li><li><a class="tocitem" href="../../contribute/">Contribute</a></li><li><a class="tocitem" href="../../reference/api/">API reference</a></li><li><a class="tocitem" href="../../reference/internal/">Internal reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Basic usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basic usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefore/TimeStruct.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sintefore/TimeStruct.jl/blob/main/docs/src/tutorials/basic_usage.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h1><p>This tutorial demonstrates the basic usage of generating flexible optimization models using the <code>TimeStruct</code> package in combination with <code>JuMP</code>.</p><pre><code class="language-julia hljs">using TimeStruct, JuMP</code></pre><h2 id="Time-structures-and-time-profiles"><a class="docs-heading-anchor" href="#Time-structures-and-time-profiles">Time structures and time profiles</a><a id="Time-structures-and-time-profiles-1"></a><a class="docs-heading-anchor-permalink" href="#Time-structures-and-time-profiles" title="Permalink"></a></h2><p>We start by defining a simple time structure with 4 periods of varying duration</p><pre><code class="language-julia hljs">simple = SimpleTimes(4, [1, 2, 3, 2])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SimpleTimes{Int64}(4, [1, 2, 3, 2])</code></pre><p>The time structure can be iterated over to access the periods and the duration can be queried for each period.</p><pre><code class="language-julia hljs">print([duration(t) for t in simple])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[1, 2, 3, 2]</code></pre><p>The time periods can be used for lookups in time profiles of various types. For example, a fixed cost profile can be defined with a constant cost of 2.0 for all periods.</p><pre><code class="language-julia hljs">cost_fixed = FixedProfile(2.0)
print([cost_fixed[t] for t in simple])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[2.0, 2.0, 2.0, 2.0]</code></pre><p>A dynamic cost profile can be defined with varying costs for each period.</p><pre><code class="language-julia hljs">cost_dynamic = OperationalProfile([1.0, 2.0, 3.0, 2.0])
print([cost_dynamic[t] for t in simple])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[1.0, 2.0, 3.0, 2.0]</code></pre><p>One of the main purposes of the <code>TimeStruct</code> package is to facilitate the modeling of optimization problems with multiple time horizons. For this, we define a two-level time structure with 2 strategic periods, each with the same operational time structure.</p><pre><code class="language-julia hljs">two_level = TwoLevel(2, simple)
nper = length(two_level)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">8</code></pre><p>We can also define a strategic cost profile with different cost profiles for each strategic period.</p><pre><code class="language-julia hljs">cost_strategic = StrategicProfile([FixedProfile(2.0), FixedProfile(3.0)])
print([cost_strategic[t] for t in two_level])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[2.0, 2.0, 2.0, 2.0, 3.0, 3.0, 3.0, 3.0]</code></pre><h2 id="Optimization-modeling"><a class="docs-heading-anchor" href="#Optimization-modeling">Optimization modeling</a><a id="Optimization-modeling-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization-modeling" title="Permalink"></a></h2><p>We are now ready to create a generic optimization model based on a given time structure and cost profile. This basic model illustrates the creation of optimization variables defined over the time structure, as well as constraints and an objective function based on the cost profile.</p><pre><code class="language-julia hljs">function create_model_1(periods::TimeStructure, cost::TimeProfile)
    m = Model()
    @variable(m, x[periods])
    @constraint(m, sum(x[t] for t in periods) &lt;= 1)
    @objective(m, Max, sum(cost[t] * x[t] for t in periods))
    return m
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">create_model_1 (generic function with 1 method)</code></pre><p>Using the simple time structure and fixed cost profile, we can create a first realization of the model.</p><pre><code class="language-julia hljs">model = create_model_1(simple, cost_fixed)
latex_formulation(model)</code></pre><p class="math-container">\[ \begin{aligned}
\max\quad &amp; 2 x_{t1} + 2 x_{t2} + 2 x_{t3} + 2 x_{t4}\\
\text{Subject to} \quad &amp; x_{t1} + x_{t2} + x_{t3} + x_{t4} \leq 1\\
\end{aligned} \]</p><p>Exchanging the fixed cost profile with the dynamic cost profile will change the model formulation to reflect the varying costs.</p><pre><code class="language-julia hljs">model = create_model_1(simple, cost_dynamic)
latex_formulation(model)</code></pre><p class="math-container">\[ \begin{aligned}
\max\quad &amp; x_{t1} + 2 x_{t2} + 3 x_{t3} + 2 x_{t4}\\
\text{Subject to} \quad &amp; x_{t1} + x_{t2} + x_{t3} + x_{t4} \leq 1\\
\end{aligned} \]</p><p>Time profiles are not connected to the time structure, so we can use the same cost profile for different time structures. This allows for a flexible modeling approach, e.g., during testing and model development.</p><pre><code class="language-julia hljs">simple_test = SimpleTimes([1])
model = create_model_1(simple_test, cost_dynamic)
latex_formulation(model)</code></pre><p class="math-container">\[ \begin{aligned}
\max\quad &amp; x_{t1}\\
\text{Subject to} \quad &amp; x_{t1} \leq 1\\
\end{aligned} \]</p><h2 id="Multiple-horizon-modeling"><a class="docs-heading-anchor" href="#Multiple-horizon-modeling">Multiple horizon modeling</a><a id="Multiple-horizon-modeling-1"></a><a class="docs-heading-anchor-permalink" href="#Multiple-horizon-modeling" title="Permalink"></a></h2><p>In a multi horizon optimization problem, there are typically constraints that are defined for each strategic period separately. To illustrate this, we create a model with a separate constraint for each strategic period using the <code>strat_periods</code> function to iterate over the strategic periods of the time structure.</p><pre><code class="language-julia hljs">function create_model_2(periods::TimeStructure, cost::TimeProfile)
    m = Model()
    @variable(m, x[periods])
    for sp in strat_periods(periods)
        @constraint(m, sum(x[t] for t in sp) &lt;= 1)
    end
    @objective(m, Max, sum(cost[t] * x[t] for t in periods))

    return m
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">create_model_2 (generic function with 1 method)</code></pre><p>Creating a strategic model with a fixed cost profile, we see that we get a separate constraint for each of the two strategic periods.</p><pre><code class="language-julia hljs">model = create_model_2(two_level, cost_fixed)
latex_formulation(model)</code></pre><p class="math-container">\[ \begin{aligned}
\max\quad &amp; 2 x_{sp1-t1} + 2 x_{sp1-t2} + 2 x_{sp1-t3} + 2 x_{sp1-t4} + 2 x_{sp2-t1} + 2 x_{sp2-t2} + 2 x_{sp2-t3} + 2 x_{sp2-t4}\\
\text{Subject to} \quad &amp; x_{sp1-t1} + x_{sp1-t2} + x_{sp1-t3} + x_{sp1-t4} \leq 1\\
 &amp; x_{sp2-t1} + x_{sp2-t2} + x_{sp2-t3} + x_{sp2-t4} \leq 1\\
\end{aligned} \]</p><p>Using a strategic cost profile will differentiate the costs for each strategic period.</p><pre><code class="language-julia hljs">model = create_model_2(two_level, cost_strategic)
latex_formulation(model)</code></pre><p class="math-container">\[ \begin{aligned}
\max\quad &amp; 2 x_{sp1-t1} + 2 x_{sp1-t2} + 2 x_{sp1-t3} + 2 x_{sp1-t4} + 3 x_{sp2-t1} + 3 x_{sp2-t2} + 3 x_{sp2-t3} + 3 x_{sp2-t4}\\
\text{Subject to} \quad &amp; x_{sp1-t1} + x_{sp1-t2} + x_{sp1-t3} + x_{sp1-t4} \leq 1\\
 &amp; x_{sp2-t1} + x_{sp2-t2} + x_{sp2-t3} + x_{sp2-t4} \leq 1\\
\end{aligned} \]</p><p>A general design principle of the <code>TimeStruct</code> package is to allow for simpler time structures, even in models that have separate modeling, e.g. for strategic periods. This is illustrated here by using the <code>simple</code> time structure in the strategic model. In this case, iterating over the strategic periods will result in a single strategic period that is equal to the original time structure.</p><pre><code class="language-julia hljs">model = create_model_2(simple, cost_fixed)
latex_formulation(model)</code></pre><p class="math-container">\[ \begin{aligned}
\max\quad &amp; 2 x_{t1} + 2 x_{t2} + 2 x_{t3} + 2 x_{t4}\\
\text{Subject to} \quad &amp; x_{t1} + x_{t2} + x_{t3} + x_{t4} \leq 1\\
\end{aligned} \]</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../battery_sizing/">Battery sizing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 10 July 2025 11:56">Thursday 10 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
