<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Operational time structures · TimeStruct</title><meta name="title" content="Operational time structures · TimeStruct"/><meta property="og:title" content="Operational time structures · TimeStruct"/><meta property="twitter:title" content="Operational time structures · TimeStruct"/><meta name="description" content="Documentation for TimeStruct."/><meta property="og:description" content="Documentation for TimeStruct."/><meta property="twitter:description" content="Documentation for TimeStruct."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TimeStruct</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Operational time structures</a><ul class="internal"><li><a class="tocitem" href="#SimpleTimes"><span>SimpleTimes</span></a></li><li><a class="tocitem" href="#Calendar-based"><span>Calendar based</span></a></li><li><a class="tocitem" href="#Representative-periods"><span>Representative periods</span></a></li><li><a class="tocitem" href="#Operational-scenarios"><span>Operational scenarios</span></a></li></ul></li><li><a class="tocitem" href="../multi/">Multi-horizon</a></li><li><a class="tocitem" href="../profiles/">Time profiles</a></li><li><a class="tocitem" href="../iteration/">Iteration utilities</a></li><li><a class="tocitem" href="../discount/">Discounting</a></li></ul></li><li><a class="tocitem" href="../../reference/api/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Operational time structures</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Operational time structures</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefore/TimeStruct.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sintefore/TimeStruct.jl/blob/main/docs/src/manual/basic.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Operational-time-structures"><a class="docs-heading-anchor" href="#Operational-time-structures">Operational time structures</a><a id="Operational-time-structures-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-time-structures" title="Permalink"></a></h1><h2 id="SimpleTimes"><a class="docs-heading-anchor" href="#SimpleTimes">SimpleTimes</a><a id="SimpleTimes-1"></a><a class="docs-heading-anchor-permalink" href="#SimpleTimes" title="Permalink"></a></h2><p>The basic time structure is <a href="#SimpleTimes"><code>SimpleTimes</code></a> which represents a continuous period of time divided into individual time periods of varying duration.  The length of each time period is obtained by the <a href="../../reference/api/#TimeStruct.duration"><code>duration(t)</code></a> function.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; periods = SimpleTimes(5, [1, 1, 1, 5, 5]);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; durations = [duration(t) for t in periods]</code><code class="nohighlight hljs ansi" style="display:block;">5-element Vector{Int64}:
 1
 1
 1
 5
 5</code></pre><p><img src="../../figures/simple.png" alt="Illustration of SimpleTimes"/></p><h2 id="Calendar-based"><a class="docs-heading-anchor" href="#Calendar-based">Calendar based</a><a id="Calendar-based-1"></a><a class="docs-heading-anchor-permalink" href="#Calendar-based" title="Permalink"></a></h2><p>For some applications it is required to relate the time periods to actual calendar dates.  This is supported by the time structure <a href="../../reference/api/#TimeStruct.CalendarTimes"><code>CalendarTimes</code></a> that alllows for creation and iteration of a calendar based sequence of periods in combination with calendar arithmetic.</p><p>The following example shows the creation of a time structure with 12 months starting from the first of January 2024. The duration of each time period is given in hours by default, but it is possible to specify the time units to use by providing the period type to use:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Dates</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; year = CalendarTimes(DateTime(2024, 1, 1), 12, Month(1));</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; duration(first(year); dfunc = Dates.Day)</code><code class="nohighlight hljs ansi" style="display:block;">31</code></pre><p>You can also make the time structure for a specific time zone as shown in the following  example with 3 days in the end of March with a transition to summer time on the second day:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using TimeZones</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; periods = CalendarTimes(DateTime(2023, 3, 25), tz&quot;CET&quot;, 3, Day(1));</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; duration.(periods)</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Int64}:
 24
 23
 24</code></pre><h2 id="Representative-periods"><a class="docs-heading-anchor" href="#Representative-periods">Representative periods</a><a id="Representative-periods-1"></a><a class="docs-heading-anchor-permalink" href="#Representative-periods" title="Permalink"></a></h2><p>In some cases, a fine-scale representation for the operations of the infrastructure of the whole time horizon, is not feasible. A possible strategy is then to select one or more representative periods and use them to evaluate operational cost and feasibility. The time structure  <a href="../../reference/api/#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a> consists of an ordered sequence of representative periods that represents a longer period of time. Each  representative period covers a specified share of the whole time period. </p><p>The following example shows an example with a year with daily resolution represented by two weeks with a share of 0.7 and 0.3 respectively. </p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP, TimeStruct</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; periods = RepresentativePeriods(
           2,
           365,
           [0.7, 0.3],
           [SimpleTimes(7,1), SimpleTimes(7,1)]
       );</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>The time periods can be iterated both for the whole time structure and individually by each representative period using the <a href="../../reference/api/#TimeStruct.repr_periods"><code>repr_periods</code></a> function. This is illustrated here  when setting up a JuMP model with a separate constraint for each representative period:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; m = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(m, prod[periods] &gt;= 0);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; for rp in repr_periods(periods)
           @constraint(m, sum(prod[t] for t in rp) &lt;= 10)
       end</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @constraint(m, sum(prod[t] * multiple(t) for t in periods) &lt;= 1);</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p>For each time period the <a href="../../reference/api/#TimeStruct.multiple"><code>multiple</code></a> function returns how many times the given period should be counted when aggregating to the whole <a href="../../reference/api/#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a> structure. This will take into account both the duration and share of each representative period, thus we have that: </p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sum(duration(t) * multiple(t) for t in periods)</code><code class="nohighlight hljs ansi" style="display:block;">365.0000000000001</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; duration(periods)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching duration(::RepresentativePeriods{Int64, Int64, SimpleTimes{Int64}})

Closest candidates are:
  duration(<span class="sgr91">::TimeStruct.OperationalPeriod</span>)
<span class="sgr90">   @</span> <span class="sgr35">TimeStruct</span> <span class="sgr90">~/work/TimeStruct.jl/TimeStruct.jl/src/<span class="sgr4">twolevel.jl:149</span></span>
  duration(<span class="sgr91">::TimeStruct.OperPeriod</span>)
<span class="sgr90">   @</span> <span class="sgr35">TimeStruct</span> <span class="sgr90">~/work/TimeStruct.jl/TimeStruct.jl/src/<span class="sgr4">twoleveltree.jl:37</span></span>
  duration(<span class="sgr91">::TimeStruct.StratNode</span>)
<span class="sgr90">   @</span> <span class="sgr35">TimeStruct</span> <span class="sgr90">~/work/TimeStruct.jl/TimeStruct.jl/src/<span class="sgr4">twoleveltree.jl:103</span></span>
  ...</code></pre><h2 id="Operational-scenarios"><a class="docs-heading-anchor" href="#Operational-scenarios">Operational scenarios</a><a id="Operational-scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-scenarios" title="Permalink"></a></h2><p>Operations often face uncertain operating conditions. In energy systems modeling, a typical example is the availability of wind and solar power.  One method for accounting for this uncertainty is to have multiple operational scenarios that are used to evaluate the cost and feasibility of  operations, where each scenario has a given probability of occurring.</p><p>The time structure <a href="../../reference/api/#TimeStruct.OperationalScenarios"><code>OperationalScenarios</code></a> represents an unordered collection of  operational scenarios where each scenario has a separate time structure and an associated  probability.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using TimeStruct, JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; scenarios = OperationalScenarios(
           3,
           [SimpleTimes(5,1), SimpleTimes(7,2), SimpleTimes(10,1)],
           [0.3, 0.2, 0.5]
       );</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p><img src="../../figures/scenario.png" alt="Illustration of OperationalScenarios"/></p><p>Similar to representative periods, each period has a <a href="../../reference/api/#TimeStruct.multiple"><code>multiple</code></a> that is defined relative to the maximum duration for all scenarios. In addition, each time period has a <a href="../../reference/api/#TimeStruct.probability"><code>probability</code></a>equal to the probability of its scenario. Thus we have that:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sum(duration(t) * probability(t) * multiple(t) for t in scenarios)</code><code class="nohighlight hljs ansi" style="display:block;">13.999999999999996</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; duration(scenarios)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching duration(::OperationalScenarios{Int64, SimpleTimes{Int64}})

Closest candidates are:
  duration(<span class="sgr91">::TimeStruct.OperationalPeriod</span>)
<span class="sgr90">   @</span> <span class="sgr35">TimeStruct</span> <span class="sgr90">~/work/TimeStruct.jl/TimeStruct.jl/src/<span class="sgr4">twolevel.jl:149</span></span>
  duration(<span class="sgr91">::TimeStruct.OperPeriod</span>)
<span class="sgr90">   @</span> <span class="sgr35">TimeStruct</span> <span class="sgr90">~/work/TimeStruct.jl/TimeStruct.jl/src/<span class="sgr4">twoleveltree.jl:37</span></span>
  duration(<span class="sgr91">::TimeStruct.StratNode</span>)
<span class="sgr90">   @</span> <span class="sgr35">TimeStruct</span> <span class="sgr90">~/work/TimeStruct.jl/TimeStruct.jl/src/<span class="sgr4">twoleveltree.jl:103</span></span>
  ...</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../multi/">Multi-horizon »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Friday 23 August 2024 10:57">Friday 23 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
