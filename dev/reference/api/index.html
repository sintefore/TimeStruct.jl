<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API reference · TimeStruct</title><meta name="title" content="API reference · TimeStruct"/><meta property="og:title" content="API reference · TimeStruct"/><meta property="twitter:title" content="API reference · TimeStruct"/><meta name="description" content="Documentation for TimeStruct."/><meta property="og:description" content="Documentation for TimeStruct."/><meta property="twitter:description" content="Documentation for TimeStruct."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TimeStruct</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/basic_usage/">Basic usage</a></li><li><a class="tocitem" href="../../tutorials/battery_sizing/">Battery sizing</a></li></ul></li><li><span class="tocitem">Showcases</span><ul><li><a class="tocitem" href="../../showcases/emx/">EnergyModelsX</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/basic/">Operational time structures</a></li><li><a class="tocitem" href="../../manual/multi/">Multi-horizon</a></li><li><a class="tocitem" href="../../manual/profiles/">Time profiles</a></li><li><a class="tocitem" href="../../manual/iteration/">Iteration utilities</a></li><li><a class="tocitem" href="../../manual/discount/">Discounting</a></li></ul></li><li><a class="tocitem" href="../../contribute/">Contribute</a></li><li class="is-active"><a class="tocitem" href>API reference</a><ul class="internal"><li><a class="tocitem" href="#api-ts"><span>Available time structures</span></a></li><li><a class="tocitem" href="#api-prop_ts"><span>Properties of time structures</span></a></li><li><a class="tocitem" href="#api-iter"><span>Iterating time structures</span></a></li><li><a class="tocitem" href="#api-prop_per"><span>Properties of time periods</span></a></li><li><a class="tocitem" href="#api-prof"><span>Time profiles</span></a></li><li><a class="tocitem" href="#api-disc"><span>Discounting</span></a></li></ul></li><li><a class="tocitem" href="../internal/">Internal reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefore/TimeStruct.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sintefore/TimeStruct.jl/blob/main/docs/src/reference/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="api"><a class="docs-heading-anchor" href="#api">Interface for using `TimeStruct</a><a id="api-1"></a><a class="docs-heading-anchor-permalink" href="#api" title="Permalink"></a></h1><h2 id="api-ts"><a class="docs-heading-anchor" href="#api-ts">Available time structures</a><a id="api-ts-1"></a><a class="docs-heading-anchor-permalink" href="#api-ts" title="Permalink"></a></h2><h3 id="api-ts-abstract"><a class="docs-heading-anchor" href="#api-ts-abstract">Abstract supertypes</a><a id="api-ts-abstract-1"></a><a class="docs-heading-anchor-permalink" href="#api-ts-abstract" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.TimeStructure" href="#TimeStruct.TimeStructure"><code>TimeStruct.TimeStructure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type TimeStructure{T&lt;:Duration}</code></pre><p>Abstract type representing different time structures that consists of one or more time periods.</p><p>The type &#39;T&#39; gives the data type used for the duration of the time periods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/structures.jl#L4-L11">source</a></section></article><h3 id="api-ts-con"><a class="docs-heading-anchor" href="#api-ts-con">Conecrete types</a><a id="api-ts-con-1"></a><a class="docs-heading-anchor-permalink" href="#api-ts-con" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.SimpleTimes" href="#TimeStruct.SimpleTimes"><code>TimeStruct.SimpleTimes</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SimpleTimes{T} &lt;: TimeStructure{T}

SimpleTimes(len::Integer, duration::Vector{T}) where {T&lt;:Duration}
SimpleTimes(len::Integer, duration::Duration)
SimpleTimes(dur::Vector{T}) where {T&lt;:Duration}</code></pre><p>A simple time structure consisting of consecutive time periods of varying duration. <code>SimpleTimes</code> is always the lowest level in a <code>TimeStruct</code> time structure. if used.</p><p>An alternative for <code>SimpleTimes</code> is <a href="#TimeStruct.CalendarTimes"><code>CalendarTimes</code></a></p><p><strong>Example</strong></p><pre><code class="language-julia hljs">uniform = SimpleTimes(5, 1.0) # 5 periods of equal length
varying = SimpleTimes([2, 2, 2, 4, 10]) # 5 periods of varying length</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/simple.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.CalendarTimes" href="#TimeStruct.CalendarTimes"><code>TimeStruct.CalendarTimes</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct CalendarTimes{T} &lt;: TimeStructure{T}

CalendarTimes(start_date, length, period)
CalendarTimes(start_date, end_date, period)
CalendarTimes(start_date, timezone, length, period)
CalendarTimes(start_date, end_date, timezone, period)</code></pre><p>A time structure that iterates flexible calendar periods using calendar arithmetic. This time structure can be used at the lowest level of time structures similar to <a href="#TimeStruct.SimpleTimes"><code>SimpleTimes</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">ts = CalendarTimes(Dates.DateTime(2023, 1, 1), 12, Dates.Month(1))
ts_zoned = CalendarTimes(Dates.DateTime(2023, 1, 1), tz&quot;Europe/Berlin&quot;, 52, Dates.Week(1))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/calendar.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.OperationalScenarios" href="#TimeStruct.OperationalScenarios"><code>TimeStruct.OperationalScenarios</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct OperationalScenarios{T,OP&lt;:TimeStructure{T}} &lt;: TimeStructure{T}

OperationalScenarios(len::Integer, scenarios::Vector{OP}, probability::Vector{&lt;:Real}) where {T, OP&lt;:TimeStructure{T}
OperationalScenarios(len::Integer, oper::TimeStructure{T})

OperationalScenarios(oper::Vector{&lt;:TimeStructure{T}}, prob::Vector)
OperationalScenarios(oper::Vector{&lt;:TimeStructure{T}})</code></pre><p>Time structure that have multiple scenarios where each scenario has its own time structure and an associated probability. These scenarios are in general represented as <a href="#TimeStruct.SimpleTimes"><code>SimpleTimes</code></a>.</p><div class="admonition is-info" id="Note-39cc64b62c6f4aac"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-39cc64b62c6f4aac" title="Permalink"></a></header><div class="admonition-body"><ul><li>The <code>TimeStructure</code>s of all operational scenarios must use the same type for the duration, <em>.i.e.</em>, either Integer or Float.</li><li>If the <code>probability</code> is not specified, it assigns the same probability to each scenario.</li><li>It is possible that <code>sum(probability)</code> is larger or smaller than 1. This can lead to problems in your application. Hence, it is advised to scale it. Currently, a warning will be given if the period shares do not sum to one as an automatic scaling will correspond to a breaking change.</li></ul></div></div><p><strong>Example</strong></p><p>The following examples create a time structure with 2 operational scenarios corresponding to a single day with equal probability.</p><pre><code class="language-julia hljs">day = SimpleTimes(24, 1)
OperationalScenarios(2, day)
OperationalScenarios([day, day], [0.5, 0.5])
OperationalScenarios([day, day])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/core_types.jl#L1-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.RepresentativePeriods" href="#TimeStruct.RepresentativePeriods"><code>TimeStruct.RepresentativePeriods</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct RepresentativePeriods{S&lt;:Duration,T,OP&lt;:TimeStructure{T}} &lt;: TimeStructure{T}

RepresentativePeriods(len::Integer, duration::S, period_share::Vector{&lt;:Real}, rep_periods::Vector{OP}) where {S&lt;:Duration, T, OP&lt;:TimeStructure{T}}
RepresentativePeriods(len::Integer, duration::S, rep_periods::TimeStructure{T}) where {S&lt;:Duration, T}

RepresentativePeriods(duration::S, period_share::Vector{&lt;:Real}, rep_periods::Vector{&lt;:TimeStructure{T}}) where {S&lt;:Duration, T}
RepresentativePeriods(duration::S, period_share::Vector{&lt;:Real}, rep_periods::TimeStructure{T}) where {S&lt;:Duration, T}

RepresentativePeriods(duration::S, rep_periods::Vector{&lt;:TimeStructure{T}}) where {S&lt;:Duration, T}</code></pre><p>Time structure that allows a time period to be represented by one or more shorter representative time periods.</p><p>The representative periods are an ordered sequence of TimeStructures that are used for each representative period. In addition, each representative period has an associated share that specifies how much of the total duration that is attributed to it.</p><div class="admonition is-info" id="Note-cdad5d10ef8de2a3"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-cdad5d10ef8de2a3" title="Permalink"></a></header><div class="admonition-body"><ul><li>The <code>TimeStructure</code>s of all representative periods must use the same type for the duration, <em>.i.e.</em>, either Integer or Float.</li><li>If the field <code>period_share</code> is not specified, it assigns the same probability to each representative period.</li><li>It is possible that <code>sum(period_share)</code> is larger or smaller than 1. This can lead to problems in your application. Hence, it is advised to scale it. Currently, a warning will be given if the period shares do not sum to one as an automatic scaling will correspond to a breaking change.</li><li>If you include <a href="#TimeStruct.OperationalScenarios"><code>OperationalScenarios</code></a> in your time structure, it is important that the scenarios are within the representative periods, and not the other way.</li></ul></div></div><p><strong>Example</strong></p><pre><code class="language-julia hljs"># A year represented by two days with hourly resolution and relative shares of 0.7 and 0.3
RepresentativePeriods(8760, [0.7, 0.3], [SimpleTimes(24, 1), SimpleTimes(24,1)])
RepresentativePeriods(8760, [0.7, 0.3], SimpleTimes(24, 1))

# A year represented by two days with hourly resolution and relative shares of 0.5
RepresentativePeriods(2, 8760, SimpleTimes(24, 1))
RepresentativePeriods(8760, [SimpleTimes(24, 1), SimpleTimes(24,1)])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/core_types.jl#L1-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.TwoLevel" href="#TimeStruct.TwoLevel"><code>TimeStruct.TwoLevel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct TwoLevel{S&lt;:Duration,T,OP&lt;:TimeStructure{T}} &lt;: TimeStructure{T}

TwoLevel(len::Integer, duration::Vector{S}, operational::Vector{OP}, op_per_strat::Float64) where {S&lt;:Duration, T, OP&lt;:TimeStructure{T}}
TwoLevel(len::Integer, duration::S, oper::TimeStructure{T}; op_per_strat) where {S, T}
TwoLevel(len::Integer, oper::TimeStructure{T}; op_per_strat) where {T}

TwoLevel(duration::S, oper::Vector{OP}; op_per_strat) where {S, T, OP&lt;:TimeStructure{T}}
TwoLevel(duration::Vector{S}, oper::TimeStructure{T}; op_per_strat) where {S, T}

TwoLevel(oper::Vector{&lt;:TimeStructure{T}}; op_per_strat) where [T]</code></pre><p>A time structure with two levels of time periods.</p><p>On the top level it has a sequence of strategic periods of varying duration. For each strategic period a separate time structure is used for operational decisions. Iterating the structure will go through all operational periods. It is possible to use different time units for the two levels by providing the number of operational time units per strategic time unit through the kewyord argument <code>op_per_strat</code>.</p><p>Potential time structures are <a href="#TimeStruct.SimpleTimes"><code>SimpleTimes</code></a>, <a href="#TimeStruct.CalendarTimes"><code>CalendarTimes</code></a>, <a href="#TimeStruct.OperationalScenarios"><code>OperationalScenarios</code></a>, or <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a>, as well as combinations of these.</p><div class="admonition is-info" id="Note-d7b6e188fdb48bef"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d7b6e188fdb48bef" title="Permalink"></a></header><div class="admonition-body"><ul><li>The <code>TimeStructure</code>s of all strategic periods must use the same type for the duration, <em>.i.e.</em>, either Integer or Float.</li></ul></div></div><div class="admonition is-danger" id="Usage-of-op_per_strat-c8a25fdefebb5e0"><header class="admonition-header">Usage of op_per_strat<a class="admonition-anchor" href="#Usage-of-op_per_strat-c8a25fdefebb5e0" title="Permalink"></a></header><div class="admonition-body"><p>The optional keyword <code>op_per_strat</code> is important for the overall calculations. If you use an hourly resolution for your operational period and yearly for investment periods, then you have to specify it as <code>op_per_strat = 8760.0</code>. Not specifying it would imply that you use the same unit for strategic and operational periods.</p></div></div><div class="admonition is-info" id="Not-specifying-the-duration-10ef8168100dfba7"><header class="admonition-header">Not specifying the duration<a class="admonition-anchor" href="#Not-specifying-the-duration-10ef8168100dfba7" title="Permalink"></a></header><div class="admonition-body"><p>If you do not specify the field <code>duration</code>, then it is calculated given the function</p><pre><code class="nohighlight hljs">_total_duration(op) / op_per_strat for op in oper</code></pre><p>in which <code>oper::Vector{&lt;:TimeStructure{T}</code>. The internal function <code>_total_duration</code> corresponds in this case to the sum of the duration of all operational periods divided by the value of the field <code>op_per_strat</code>.</p></div></div><p><strong>Example</strong></p><pre><code class="language-julia hljs"># 5 years with 24 hours of operations for each year. Note that in this case we use as unit
# `hour` for both the duration of strategic periods and operational periods
TwoLevel(5, 8760, SimpleTimes(24, 1))

# The same time structure with the unit `year` for strategic periods and unit `hour` for
# operational periods
TwoLevel(5, 1, SimpleTimes(24, 1); op_per_strat=8760.0)

# All individual constructors
TwoLevel(2, ones(2), [SimpleTimes(24, 1), SimpleTimes(24, 1)], 8760.0)
TwoLevel(2, 1, SimpleTimes(24, 1); op_per_strat=8760.0)
TwoLevel(1, [SimpleTimes(24, 1), SimpleTimes(24, 1)]; op_per_strat=8760.0)
TwoLevel(ones(2), SimpleTimes(24, 1); op_per_strat=8760.0)

# Constructors without duration
TwoLevel([SimpleTimes(24, 1), SimpleTimes(24, 1)]; op_per_strat=8760.0)
TwoLevel(2, SimpleTimes(24, 1); op_per_strat=8760.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strategic/core_types.jl#L1-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.TwoLevelTree" href="#TimeStruct.TwoLevelTree"><code>TimeStruct.TwoLevelTree</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct TwoLevelTree{S,T,OP&lt;:AbstractTreeNode{S,T}} &lt;: TimeStructure{T}

TwoLevelTree(node::TreeNode; op_per_strat=8760.0)
TwoLevelTree(duration::S, branching::Vector, ts::OP; op_per_strat::Float64 = 1.0) where {S,T,OP&lt;:TimeStructure{T}}</code></pre><p>Time structure allowing for a tree structure for the strategic level. For each strategic node in the tree a separate time structure is used for operational decisions. Iterating the structure will go through all operational periods.</p><p>The default approach for creating a <code>TwoLevelTree</code> is by providing the root <code>[TreeNode</code>](@ref) with all its children nodes. In the case of a regular structure, that is all children nodes have the same <code>duration</code>, time structure <code>ts</code>, probability, and children itself, you can use a simplified constructor with the <code>branching</code> vector. The vector <code>branching</code> specifies the number of branchings at each stage of the tree, excluding the first stage. The branches at each stage will all have equal probability, duration, and time structure.</p><div class="admonition is-warning" id="Additional-iteratores-50a6154621748828"><header class="admonition-header">Additional iteratores<a class="admonition-anchor" href="#Additional-iteratores-50a6154621748828" title="Permalink"></a></header><div class="admonition-body"><p><code>TwoLevelTree</code> utilize a separate <a href="#TimeStruct.withprev"><code>withprev</code></a> method which is equivalent to the existing method for the other time structures. <a href="#TimeStruct.withnext"><code>withnext</code></a>, <a href="#TimeStruct.chunk">`chunk</a> and <a href="#TimeStruct.chunk_duration"><code>chunk_duration</code></a> are not implemented and will result in an error when used.</p></div></div><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Declare the individual time structure
day = SimpleTimes(24, 1)

# Regular tree with 3 strategic periods of duration 5, 3 branches for the second strategic
# period, and 6 branchs in the thirdand forth strategic period
regtree_1 = TwoLevelTree(5, [3, 2, 1], day)

# Equivalent structure using `TreeNode` and the different constructors
regtree_2 = TwoLevelTree(
    TreeNode(5, day, [
        TreeNode(5, day, 2,
            TreeNode(5, day, TreeNode(5, day))
        )
        TreeNode(5, day, [0.5, 0.5],
            TreeNode(5, day, TreeNode(5, day))
        )
        TreeNode(5, day, [
            TreeNode(5, day, TreeNode(5, day)),
            TreeNode(5, day, TreeNode(5, day)),
        ])
    ])
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L1-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.TreeNode" href="#TimeStruct.TreeNode"><code>TimeStruct.TreeNode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct TreeNode{S,T,OP&lt;:TimeStructure{T},COP&lt;:Union{Nothing, TimeStructure{T}}}

TreeNode(duration::Number, ts::TimeStructure)
TreeNode(duration::Number, ts::TimeStructure, child::TreeNode)
TreeNode(duration::Number, ts::TimeStructure, len::Int64, children::TreeNode)
TreeNode(duration::Number, ts::TimeStructure, children::Vector{&lt;:TreeNode})
TreeNode(duration::Number, ts::TimeStructure, probability::Vector{&lt;:Float64}, sub_tn::TreeNode)</code></pre><p>A subtype introduced for creating all potential structures of a <code>TwoLevelTree</code>.</p><p>A <code>TreeNode</code> is similar to a <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a> but does not require the calculation of all required parameters by the user. The parameters are automatically calculated when creating a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a> for a given <code>TreeNode</code>.</p><p>The TreeNode has a given <code>duration</code> which is similar to the <code>duration</code> of a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a> time structure and a single TimeStructure <code>ts</code>.</p><div class="admonition is-info" id="Note-6737974c03f3e7a"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-6737974c03f3e7a" title="Permalink"></a></header><div class="admonition-body"><ul><li>The <code>TimeStructure</code> of the <code>TreeNode</code> and all children must use the same type for the duration, <em>.i.e.</em>, either Integer or Float.</li></ul></div></div><p><strong>Constructors</strong></p><p>The following constructors are included for the type:</p><ul><li><code>TreeNode(duration::Number, ts::TimeStructure)</code>: the last <code>TreeNode</code> within a branch, <em>i.e.</em>, the leaf of the branch. It does not posess a child.</li><li><code>TreeNode(duration::Number, ts::TimeStructure, child::TreeNode)</code>: a <code>TreeNode</code> with only a single child. <em>i.e.</em>, a linear continuation.</li><li><code>TreeNode(duration::Number, ts::TimeStructure, len::Int64, children::TreeNode)</code>: a <code>TreeNode</code> with <code>len</code> children, each with the same structure and probability.</li><li><code>TreeNode(duration::Number, ts::TimeStructure, probability::Vector{&lt;:Float64}, children::TreeNode)</code>: a <code>TreeNode</code> with <code>len</code> children, each with the same structure but a different probability.</li><li><code>TreeNode(duration::Number, ts::TimeStructure, children::Vector{&lt;:TreeNode})</code> corresponds to a number of different children with different structures, but the same probability.</li><li><code>TreeNode(duration::Number, ts::TimeStructure, probability::Vector{&lt;:Float64}, children::TreeNode)</code>: a <code>TreeNode</code> with <code>length(probability)</code> children, each with the same structure but a different probability.</li><li><code>TreeNode(duration::Number, ts::TimeStructure, probability::Vector{&lt;:Float64}, children::Vector{&lt;:TreeNode})</code>: a <code>TreeNode</code> with <code>length(probability)</code> children, each with a different structure and probability.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">day = SimpleTimes(24, 1)
# Provides a leaf node
TreeNode(2, day)

# Provides a linear node structure
TreeNode(2, day, TreeNode(2, day))

# Provides a tree node with two children with 70 % and 30 % probability, respectively
TreeNode(2, day, [0.7, 0.3], TreeNode(2, SimpleTimes(24, 1)))


# Provide a tree node with two children with 70 % (168 periods) and 30 % (24 periods)
# probability, respectively
TreeNode(2, day, [0.7, 0.3], [
    TreeNode(2, SimpleTimes(168, 1)),
    TreeNode(2, SimpleTimes(24, 1)),
])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/tree_periods.jl#L76-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.regular_tree" href="#TimeStruct.regular_tree"><code>TimeStruct.regular_tree</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">regular_tree(
    duration::S,
    branching::Vector,
    ts::OP;
    op_per_strat::Real=1.0,
) where {S,T,OP&lt;:TimeStructure{T}}</code></pre><p>Function for creating a regular tree with a uniform structure for each strategic period.</p><p>Each strategic period is of equal length as given by <code>duration</code> and will have the same operational time structure <code>ts</code>. The vector <code>branching</code> specifies the number of branchings at each stage of the tree, excluding the first stage. The branches at each stage will all have equal probability.</p><div class="admonition is-info" id="Deprecated-function-82abcaaeed1bbd60"><header class="admonition-header">Deprecated function<a class="admonition-anchor" href="#Deprecated-function-82abcaaeed1bbd60" title="Permalink"></a></header><div class="admonition-body"><p>This function is deprecated and will be removed in a later release. The new function is given by</p><pre><code class="language-julia hljs">TwoLevelTree(duration, branching, ts; op_per_strat)</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L241-L264">source</a></section></article><h2 id="api-prop_ts"><a class="docs-heading-anchor" href="#api-prop_ts">Properties of time structures</a><a id="api-prop_ts-1"></a><a class="docs-heading-anchor-permalink" href="#api-prop_ts" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.mult_scen" href="#TimeStruct.mult_scen"><code>TimeStruct.mult_scen</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mult_scen(scen)</code></pre><p>Returns the multiplication factor to be used for this scenario when comparing with the overall set of operational scenarios.</p><p>If all scenarios in a set of operational scenarios are of equal duration (preferred usage), this factor is equal to one. Otherwise this factor would be equal to the ratio of the scenario with longest duration to the duration of the given scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/opscenarios.jl#L24-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.mult_repr" href="#TimeStruct.mult_repr"><code>TimeStruct.mult_repr</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mult_repr(rp)</code></pre><p>Returns the multiplication factor to be used for this representative period when comparing with the representative periods structure it is part of.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/rep_periods.jl#L16-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.mult_strat" href="#TimeStruct.mult_strat"><code>TimeStruct.mult_strat</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mult_strat(sp)</code></pre><p>Returns the multiplication factor to be used for this strategic period when comparing the duration of the strategic period to the duration of the time structure being used for the strategic period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strategic/strat_periods.jl#L23-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.probability_scen" href="#TimeStruct.probability_scen"><code>TimeStruct.probability_scen</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probability_scen(scen)</code></pre><p>The probability of a single scenario in a set of operational scenarios.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/opscenarios.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.probability_branch" href="#TimeStruct.probability_branch"><code>TimeStruct.probability_branch</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probability_branch(t::Union{TimePeriod, TimeStructurePeriod})</code></pre><p>Returns the branch probability associated with the time period or time structure period</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/structures.jl#L92-L96">source</a></section></article><p>The following properties are included for a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a> time structure:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.n_strat_per" href="#TimeStruct.n_strat_per"><code>TimeStruct.n_strat_per</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">n_strat_per(ts::TwoLevelTree)</code></pre><p>Returns the number of strategic periods of a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>. If the number is different for the individual branches, it returns the maximum value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L85-L90">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.n_children" href="#TimeStruct.n_children"><code>TimeStruct.n_children</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">n_children(n::StratNode, ts::TwoLevelTree)</code></pre><p>Returns the number of children of a <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L93-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.n_leaves" href="#TimeStruct.n_leaves"><code>TimeStruct.n_leaves</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">n_leaves(ts::TwoLevelTree)</code></pre><p>Returns the number of children of a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L100-L104">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.n_branches" href="#TimeStruct.n_branches"><code>TimeStruct.n_branches</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">n_branches(ts::TwoLevelTree, sp::Int)</code></pre><p>Returns the number of branches in strategic period <code>sp</code> of a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L107-L111">source</a></section></article><h2 id="api-iter"><a class="docs-heading-anchor" href="#api-iter">Iterating time structures</a><a id="api-iter-1"></a><a class="docs-heading-anchor-permalink" href="#api-iter" title="Permalink"></a></h2><h3 id="api-iter-ts"><a class="docs-heading-anchor" href="#api-iter-ts">For individual time structures</a><a id="api-iter-ts-1"></a><a class="docs-heading-anchor-permalink" href="#api-iter-ts" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.repr_periods" href="#TimeStruct.repr_periods"><code>TimeStruct.repr_periods</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">repr_periods(ts::TimeStructure)</code></pre><p>This function returns a type for iterating through the individual representative periods of a <code>TimeStructure</code>. The type of the iterator is dependent on the type of the input <code>TimeStructure</code>.</p><p>When the <code>TimeStructure</code> is a <code>TimeStructure</code>, <code>repr_periods</code> returns a <a href="../internal/#TimeStruct.SingleReprPeriodWrapper"><code>SingleReprPeriodWrapper</code></a>. This corresponds to the default behavior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/rep_periods.jl#L85-L94">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a>, <code>repr_periods</code> returns the iterator <a href="../internal/#TimeStruct.ReprPers"><code>ReprPers</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/rep_periods.jl#L157-L160">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StrategicPeriod"><code>StrategicPeriod</code></a>, <code>repr_periods</code> returns the iterator <a href="../internal/#TimeStruct.StratReprPers"><code>StratReprPers</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/strat_periods.jl#L73-L76">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.SingleStrategicPeriod"><code>SingleStrategicPeriod</code></a>, <code>repr_periods</code> returns the correct behavior based on the substructure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/strat_periods.jl#L107-L110">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a>, <code>repr_periods</code> returns an <code>Array</code> of all <a href="../internal/#TimeStruct.StratReprPeriod"><code>StratReprPeriod</code></a>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/strat_periods.jl#L112-L115">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a>, <code>repr_periods</code> returns the iterator <a href="../internal/#TimeStruct.StratNodeReprPers"><code>StratNodeReprPers</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/tree_periods.jl#L67-L70">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>, <a href="../internal/#TimeStruct.StratScens"><code>StratScens</code></a>, or a <a href="../internal/#TimeStruct.StrategicScenario"><code>StrategicScenario</code></a>, <code>repr_periods</code> returns an <code>Array</code> of all <a href="../internal/#TimeStruct.StratNodeReprPeriod"><code>StratNodeReprPeriod</code></a>s.</p><p>These are equivalent to a <a href="../internal/#TimeStruct.StratReprPeriod"><code>StratReprPeriod</code></a> of a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a> time structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/representative/tree_periods.jl#L95-L101">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.opscenarios" href="#TimeStruct.opscenarios"><code>TimeStruct.opscenarios</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">opscenarios(ts::TimeStructure)</code></pre><p>This function returns a type for iterating through the individual operational scenarios of a <code>TimeStructure</code>. The type of the iterator is dependent on the type of the input <code>TimeStructure</code>.</p><p>When the <code>TimeStructure</code> is a <code>TimeStructure</code>, <code>opscenarios</code> returns a <a href="../internal/#TimeStruct.SingleScenarioWrapper"><code>SingleScenarioWrapper</code></a>. This corresponds to the default behavior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/opscenarios.jl#L101-L110">source</a></section><section><div><p>When the <code>TimeStructure</code> is an <a href="#TimeStruct.OperationalScenarios"><code>OperationalScenarios</code></a>, <code>opscenarios</code> returns the iterator <a href="../internal/#TimeStruct.OpScens"><code>OpScens</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/opscenarios.jl#L183-L186">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.RepresentativePeriod"><code>RepresentativePeriod</code></a> with <a href="#TimeStruct.OperationalScenarios"><code>OperationalScenarios</code></a>, <code>opscenarios</code> returns the iterator <a href="../internal/#TimeStruct.RepOpScens"><code>RepOpScens</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/rep_periods.jl#L77-L80">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.SingleReprPeriod"><code>SingleReprPeriod</code></a>, <code>opscenarios</code> returns the correct behavior based on the substructure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/rep_periods.jl#L123-L126">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a>, <code>opscenarios</code> returns an <code>Array</code> of all <a href="../internal/#TimeStruct.ReprOpScenario"><code>ReprOpScenario</code></a>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/rep_periods.jl#L128-L131">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StrategicPeriod"><code>StrategicPeriod</code></a>, <code>opscenarios</code> returns the iterator <a href="../internal/#TimeStruct.StratOpScens"><code>StratOpScens</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/strat_periods.jl#L78-L81">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StrategicPeriod"><code>StrategicPeriod</code></a> with <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a>, <code>opscenarios</code> returns a vector of <a href="../internal/#TimeStruct.StratReprOpScenario"><code>StratReprOpScenario</code></a>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/strat_periods.jl#L222-L225">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.SingleStrategicPeriod"><code>SingleStrategicPeriod</code></a>, <code>opscenarios</code> returns the correct behavior based on the substructure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/strat_periods.jl#L271-L274">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a>, <code>opscenarios</code> returns a vector of <a href="../internal/#TimeStruct.StratOpScenario"><code>StratOpScenario</code></a>s or a a vector of <a href="../internal/#TimeStruct.StratReprOpScenario"><code>StratReprOpScenario</code></a>s depending on whether the <code>TimeStructure</code> includes <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a> or not.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/strat_periods.jl#L276-L280">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a>, <code>opscenarios</code> returns the iterator <a href="../internal/#TimeStruct.StratNodeOpScens"><code>StratNodeOpScens</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/tree_periods.jl#L73-L76">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StratNodeReprPeriod"><code>StratNodeReprPeriod</code></a> with a <a href="../internal/#TimeStruct.RepresentativePeriod"><code>RepresentativePeriod</code></a>, <code>opscenarios</code> returns the iterator <a href="../internal/#TimeStruct.StratNodeReprOpScens"><code>StratNodeReprOpScens</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/tree_periods.jl#L185-L188">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StratNodeReprPeriod"><code>StratNodeReprPeriod</code></a> with a <a href="../internal/#TimeStruct.SingleReprPeriod"><code>SingleReprPeriod</code></a>, <code>opscenarios</code> returns the iterator <a href="../internal/#TimeStruct.StratNodeOpScens"><code>StratNodeOpScens</code></a> as the overall time structure does not include representative periods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/tree_periods.jl#L201-L205">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a> with <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a>, <code>opscenarios</code> returns an <code>Array</code> of all <a href="../internal/#TimeStruct.StratNodeReprOpScenario"><code>StratNodeReprOpScenario</code></a>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/tree_periods.jl#L233-L236">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>, <a href="../internal/#TimeStruct.StratScens"><code>StratScens</code></a>, or a <a href="../internal/#TimeStruct.StrategicScenario"><code>StrategicScenario</code></a>, <code>opscenarios</code> returns an <code>Array</code> of all <a href="../internal/#TimeStruct.StratNodeOpScenario"><code>StratNodeOpScenario</code></a>s or <a href="../internal/#TimeStruct.StratNodeReprOpScenario"><code>StratNodeReprOpScenario</code></a>s types, depending on whether the <code>TimeStructure</code> includes <a href="#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a> or not.</p><p>These are equivalent to a <a href="../internal/#TimeStruct.StratOpScenario"><code>StratOpScenario</code></a> and <a href="../internal/#TimeStruct.StratReprOpScenario"><code>StratReprOpScenario</code></a> of a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a> time structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/op_scenarios/tree_periods.jl#L241-L250">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.strat_periods" href="#TimeStruct.strat_periods"><code>TimeStruct.strat_periods</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">strat_periods(ts::TimeStructure)</code></pre><p>This function returns a type for iterating through the individual strategic periods of a <code>TimeStructure</code>. The type of the iterator is dependent on the type of the input <code>TimeStructure</code>. The elements returned of the iterator will be subtypes of <a href="../internal/#TimeStruct.AbstractStrategicPeriod"><code>AbstractStrategicPeriod</code></a>.</p><p>When the <code>TimeStructure</code> is a <code>TimeStructure</code>, <code>strat_periods</code> returns a <a href="../internal/#TimeStruct.SingleStrategicPeriodWrapper"><code>SingleStrategicPeriodWrapper</code></a>. This corresponds to the default behavior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strategic/strat_periods.jl#L99-L109">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a>, <code>strat_periods</code> returns the iterator <a href="../internal/#TimeStruct.StratPers"><code>StratPers</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">periods = TwoLevel(5, SimpleTimes(10,1))
total_dur = sum(duration_strat(sp) for sp in strategic_periods(periods))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strategic/strat_periods.jl#L210-L219">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>, <code>strat_periods</code> returns a <a href="../internal/#TimeStruct.StratTreeNodes"><code>StratTreeNodes</code></a> type, which, through iteration, provides <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a> types.</p><p>These are equivalent to a <a href="../internal/#TimeStruct.StrategicPeriod"><code>StrategicPeriod</code></a> of a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a> time structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/core_types.jl#L301-L306">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.SingleStrategicScenario"><code>SingleStrategicScenario</code></a> or <a href="../internal/#TimeStruct.SingleStrategicScenarioWrapper"><code>SingleStrategicScenarioWrapper</code></a>, <code>strat_periods</code> returns the value of its internal <a href="#TimeStruct.TimeStructure"><code>TimeStructure</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/strat_scenarios.jl#L59-L63">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StrategicScenario"><code>StrategicScenario</code></a>, <code>strat_periods</code> returns a <a href="../internal/#TimeStruct.StratTreeNodes"><code>StratTreeNodes</code></a> type, which, through iteration, provides <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a> types.</p><p>These are equivalent to a <a href="../internal/#TimeStruct.StrategicPeriod"><code>StrategicPeriod</code></a> of a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a> time structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/strat_scenarios.jl#L112-L117">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="../internal/#TimeStruct.StratScens"><code>StratScens</code></a>, <code>strat_periods</code> returns a <a href="../internal/#TimeStruct.StratTreeNodes"><code>StratTreeNodes</code></a> type, which, through iteration, provides <a href="../internal/#TimeStruct.StratNode"><code>StratNode</code></a> types.</p><p>These are equivalent to a <a href="../internal/#TimeStruct.StrategicPeriod"><code>StrategicPeriod</code></a> of a <a href="#TimeStruct.TwoLevel"><code>TwoLevel</code></a> time structure.</p><div class="admonition is-info" id="Note-910d5474a0f2e171"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-910d5474a0f2e171" title="Permalink"></a></header><div class="admonition-body"><p>The corresponding <code>StratTreeNodes</code> type is equivalent to the created <code>StratTreeNodes</code> when using <code>strat_periods</code> directly on the <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/strat_scenarios.jl#L176-L185">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.strategic_periods" href="#TimeStruct.strategic_periods"><code>TimeStruct.strategic_periods</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">strategic_periods(ts)</code></pre><p>Convenience constructor for <a href="#TimeStruct.strat_periods"><code>strat_periods</code></a>. Both names can be used interchangable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strategic/strat_periods.jl#L112-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.strategic_scenarios" href="#TimeStruct.strategic_scenarios"><code>TimeStruct.strategic_scenarios</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">strategic_scenarios(ts::TimeStructure)</code></pre><p>This function returns a type for iterating through the individual strategic scenarios of a <code>TwoLevelTree</code>. The type of the iterator is dependent on the type of the input <code>TimeStructure</code>.</p><p>When the <code>TimeStructure</code> is a <code>TimeStructure</code>, <code>strategic_scenarios</code> returns a <a href="../internal/#TimeStruct.SingleStrategicScenarioWrapper"><code>SingleStrategicScenarioWrapper</code></a>. This corresponds to the default behavior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/strat_scenarios.jl#L67-L76">source</a></section><section><div><p>When the <code>TimeStructure</code> is a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a>, <code>strategic_scenarios</code> returns the iterator <code>StratScens</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strat_scenarios/strat_scenarios.jl#L132-L135">source</a></section></article><h3 id="api-iter-spec"><a class="docs-heading-anchor" href="#api-iter-spec">Specialized iterators</a><a id="api-iter-spec-1"></a><a class="docs-heading-anchor-permalink" href="#api-iter-spec" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.withprev" href="#TimeStruct.withprev"><code>TimeStruct.withprev</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">withprev(iter)</code></pre><p>Iterator wrapper that yields <code>(prev, t)</code> where <code>prev</code> is the previous time period or <code>nothing</code> for the first time period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/utils.jl#L5-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.withnext" href="#TimeStruct.withnext"><code>TimeStruct.withnext</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">withnext(iter)</code></pre><p>Iterator wrapper that yields <code>(t, next)</code> where <code>next</code> is the next time period or <code>nothing</code> for the last time period.</p><p>Note that this iterator can not be used when iterating the nodes of a strategic tree structure, as the next node is not uniquely defined in that case.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/utils.jl#L44-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.chunk" href="#TimeStruct.chunk"><code>TimeStruct.chunk</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">chunk(iter, n; cyclic = false)</code></pre><p>Iterator wrapper that yields chunks where each chunk is an iterator over at most <code>n</code> consecutive time periods starting at each time period of the original iterator.</p><p>It is possible to get the <code>n</code> consecutive time periods in a cyclic fashion, by setting <code>cyclic</code> to true.</p><div class="admonition is-warning" id="TwoLevelTree-4795c3145fbf155b"><header class="admonition-header">TwoLevelTree<a class="admonition-anchor" href="#TwoLevelTree-4795c3145fbf155b" title="Permalink"></a></header><div class="admonition-body"><p>Usage of the function for the strategic periods of a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a> time structure results in an error.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/utils.jl#L83-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.chunk_duration" href="#TimeStruct.chunk_duration"><code>TimeStruct.chunk_duration</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">chunk_duration(iter, dur)</code></pre><p>Iterator wrapper that yields chunks based on duration where each chunk is an iterator over the following time periods until at least <code>dur</code> time is covered or the end is reached.</p><div class="admonition is-warning" id="TwoLevelTree-4795c3145fbf155b"><header class="admonition-header">TwoLevelTree<a class="admonition-anchor" href="#TwoLevelTree-4795c3145fbf155b" title="Permalink"></a></header><div class="admonition-body"><p>Usage of the function for the strategic periods of a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a> time structure results in an error.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/utils.jl#L142-L151">source</a></section></article><h2 id="api-prop_per"><a class="docs-heading-anchor" href="#api-prop_per">Properties of time periods</a><a id="api-prop_per-1"></a><a class="docs-heading-anchor-permalink" href="#api-prop_per" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.duration" href="#TimeStruct.duration"><code>TimeStruct.duration</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">duration(t::TimePeriod)</code></pre><p>The duration of a time period in number of operational time units.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/structures.jl#L63-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.isfirst" href="#TimeStruct.isfirst"><code>TimeStruct.isfirst</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isfirst(t::TimePeriod)</code></pre><p>Returns true if the time period is the first in a sequence and has no previous time period</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/structures.jl#L70-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.multiple" href="#TimeStruct.multiple"><code>TimeStruct.multiple</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">multiple(t::TimePeriod)</code></pre><p>Returns the number of times a time period should be counted for the whole time structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/structures.jl#L77-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.multiple_strat" href="#TimeStruct.multiple_strat"><code>TimeStruct.multiple_strat</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">multiple_strat(sp::AbstractStrategicPeriod, t)</code></pre><p>Returns the number of times a time period <code>t</code> should be accounted for when accumulating over one single unit of strategic time.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">periods = TwoLevel(10, 1, SimpleTimes(24,1); op_per_strat = 8760)
for sp in strategic_periods(periods)
    hours_per_year = sum(duration(t) * multiple_strat(sp, t) for t in sp)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/strategic/strat_periods.jl#L177-L190">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.probability" href="#TimeStruct.probability"><code>TimeStruct.probability</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probability(t::TimePeriod)</code></pre><p>Returns the probability associated with the time period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/structures.jl#L85-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.start_oper_time" href="#TimeStruct.start_oper_time"><code>TimeStruct.start_oper_time</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">start_oper_time(t, ts)</code></pre><p>Get the operational start time of the time period <code>t</code> in the time structure <code>ts</code>.</p><p>The operational start time is equal to the sum of the durations of all previous operational time periods in its operational time structure.</p><div class="admonition is-warning" id="Warning-26393e67b579004c"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-26393e67b579004c" title="Permalink"></a></header><div class="admonition-body"><p>The current implementation is not computationally efficient and should be avoided if using this in loops for time structures with many time periods. If this is the case, consider implementing a local tracking of start time using the duration of the time periods.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/utils.jl#L216-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.end_oper_time" href="#TimeStruct.end_oper_time"><code>TimeStruct.end_oper_time</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">end_oper_time(t, ts)</code></pre><p>Get the operational end time of the time period <code>t</code> in the time structure <code>ts</code>.</p><p>The operational end time is equal to the sum of the durations of all previous operational time periods in its operational time structure, including its own duration.</p><div class="admonition is-warning" id="Warning-3ba3f77f45a1dc84"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-3ba3f77f45a1dc84" title="Permalink"></a></header><div class="admonition-body"><p>The current implementation is not computationally efficient and should be avoided if using this in loops for time structures with many time periods. If this is the case, consider implementing a local tracking of end time using the duration of the time periods.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/utils.jl#L175-L189">source</a></section></article><h2 id="api-prof"><a class="docs-heading-anchor" href="#api-prof">Time profiles</a><a id="api-prof-1"></a><a class="docs-heading-anchor-permalink" href="#api-prof" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.FixedProfile" href="#TimeStruct.FixedProfile"><code>TimeStruct.FixedProfile</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FixedProfile(val)</code></pre><p>Time profile with a constant value for all time periods.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">profile = FixedProfile(5)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/profiles.jl#L5-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.OperationalProfile" href="#TimeStruct.OperationalProfile"><code>TimeStruct.OperationalProfile</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OperationalProfile(vals::Vector{T}) where {T}</code></pre><p>Time profile with a value that varies with the operational time period. This profile cannot be accessed using <a href="../internal/#TimeStruct.AbstractOperationalScenario"><code>AbstractOperationalScenario</code></a>, <a href="../internal/#TimeStruct.AbstractRepresentativePeriod"><code>AbstractRepresentativePeriod</code></a>, or <a href="../internal/#TimeStruct.AbstractStrategicPeriod"><code>AbstractStrategicPeriod</code></a>.</p><p>If too few values are provided, the last provided value will be repeated.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">profile = OperationalProfile([1, 2, 3, 4, 5])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/profiles.jl#L45-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.RepresentativeProfile" href="#TimeStruct.RepresentativeProfile"><code>TimeStruct.RepresentativeProfile</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RepresentativeProfile(vals::Vector{P}) where {T, P&lt;:TimeProfile{T}}
RepresentativeProfile(vals::Vector)</code></pre><p>Time profile with a separate time profile for each representative period. This profile cannot be accessed using <a href="../internal/#TimeStruct.AbstractStrategicPeriod"><code>AbstractStrategicPeriod</code></a>.</p><p>If too few profiles are provided, the last given profile will be repeated.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Varying values in each representative period
profile = RepresentativeProfile([OperationalProfile([1, 2]), OperationalProfile([3, 4, 5])])
 # The same value in each representative period
profile = RepresentativeProfile([1, 2, 3, 4, 5])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/profiles.jl#L209-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.ScenarioProfile" href="#TimeStruct.ScenarioProfile"><code>TimeStruct.ScenarioProfile</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ScenarioProfile(vals::Vector{P}) where {T, P&lt;:TimeProfile{T}}
ScenarioProfile(vals::Vector)</code></pre><p>Time profile with a separate time profile for each scenario. This profile cannot be accessed using <a href="../internal/#TimeStruct.AbstractRepresentativePeriod"><code>AbstractRepresentativePeriod</code></a> or <a href="../internal/#TimeStruct.AbstractStrategicPeriod"><code>AbstractStrategicPeriod</code></a>.</p><p>If too few profiles are provided, the last given profile will be repeated.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Varying values in each operational scenario
profile = ScenarioProfile([OperationalProfile([1, 2]), OperationalProfile([3, 4, 5])])
 # The same value in each operational scenario
profile = ScenarioProfile([1, 2, 3, 4, 5])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/profiles.jl#L148-L164">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.StrategicProfile" href="#TimeStruct.StrategicProfile"><code>TimeStruct.StrategicProfile</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StrategicProfile(vals::Vector{P}) where {T, P&lt;:TimeProfile{T}}
StrategicProfile(vals::Vector)</code></pre><p>Time profile with a separate time profile for each strategic period.</p><p>If too few profiles are provided, the last given profile will be repeated.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Varying values in each strategic period
profile = StrategicProfile([OperationalProfile([1, 2]), OperationalProfile([3, 4, 5])])
 # The same value in each strategic period
profile = StrategicProfile([1, 2, 3, 4, 5])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/profiles.jl#L90-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.StrategicStochasticProfile" href="#TimeStruct.StrategicStochasticProfile"><code>TimeStruct.StrategicStochasticProfile</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StrategicStochasticProfile(vals::Vector{&lt;:Vector{P}}) where {T, P&lt;:TimeProfile{T}}
StrategicStochasticProfile(vals::Vector{&lt;:Vector})</code></pre><p>Time profile with a separate time profile for each strategic node in a <a href="#TimeStruct.TwoLevelTree"><code>TwoLevelTree</code></a> structure.</p><p>If too few profiles are provided, the last given profile will be repeated, both for strategic periods and branches within a strategic period.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"> # The same value in each strategic period and branch
profile = StrategicStochasticProfile([[1], [21, 22]])
# Varying values in each strategic period and branch
profile = StrategicStochasticProfile([
    [OperationalProfile([11, 12])],
    [OperationalProfile([21, 22]), OperationalProfile([31, 32])]
])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/profiles.jl#L268-L288">source</a></section></article><h2 id="api-disc"><a class="docs-heading-anchor" href="#api-disc">Discounting</a><a id="api-disc-1"></a><a class="docs-heading-anchor-permalink" href="#api-disc" title="Permalink"></a></h2><h3 id="api-disc-type"><a class="docs-heading-anchor" href="#api-disc-type">Type</a><a id="api-disc-type-1"></a><a class="docs-heading-anchor-permalink" href="#api-disc-type" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.Discounter" href="#TimeStruct.Discounter"><code>TimeStruct.Discounter</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Discounter(discount_rate, ts::TimeStructure)
Discounter(discount_rate, timeunit_to_year, ts::TimeStructure)</code></pre><p>Structure to hold discount information to be used for a time structure <code>ts</code>. The <code>discount_rate</code> is an absolute discount rate while the parameter <code>timeunit_to_year</code> is used convert the time units of strategic periods in the time structure to years (default value = 1.0).</p><p>As an example, consider the following time structure:</p><pre><code class="language-julia hljs"># Modelling of a day with hourly resolution for 50 years with a resolution of 5 years
periods = TwoLevel(10, 5 * 8760, SimpleTimes(24, 1))

# The parameter `timeunit_to_year` must in this case be 1 year / 8760 h
disc = Discounter(0.04, 1 / 8760, periods)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/discount.jl#L3-L20">source</a></section></article><h3 id="api-disc-type-2"><a class="docs-heading-anchor" href="#api-disc-type-2">Functions</a><a class="docs-heading-anchor-permalink" href="#api-disc-type-2" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.discount" href="#TimeStruct.discount"><code>TimeStruct.discount</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">discount(t::Union{TimePeriod,TimeStructurePeriod}, time_struct::TimeStructure, discount_rate; type = &quot;start&quot;, timeunit_to_year=1.0)
discount(disc::Discounter, t::Union{TimePeriod,TimeStructurePeriod}; type = &quot;start&quot;)</code></pre><p>Calculates the discount factor to be used for a time period <code>t</code> using a fixed <code>discount_rate</code>. The function can be either called using a <a href="#TimeStruct.Discounter"><code>Discounter</code></a> type or by specifying the parameters (time structure <code>ts</code>, <code>discount_rate</code> and potentially <code>timeunit_to_year</code>) directly.</p><p>There are two types of discounting available:</p><ol><li><p>Discounting to the start of the strategic period containing the time period:</p><p>This can be achieved through specifying <code>type=&quot;start&quot;</code>. It is useful for investment costs</p></li><li><p>Discounting to the average of the over the whole strategic period:</p><p>The average can be calculated either as a continuous average (<code>type=&quot;avg&quot;</code>) or as a discrete average that discounts to the start of each year (<code>type=&quot;avg_year&quot;</code>). Average discounting is useful for operational costs.</p></li></ol><p>The <code>timeunit_to_year</code> parameter is used to convert the time units of strategic periods in the time structure to years (default value = 1.0).</p><div class="admonition is-success" id="Comparison-with-objective_weight-1c701a9007a8f3e"><header class="admonition-header">Comparison with `objective_weight`<a class="admonition-anchor" href="#Comparison-with-objective_weight-1c701a9007a8f3e" title="Permalink"></a></header><div class="admonition-body"><p>Both <a href="#TimeStruct.objective_weight"><code>objective_weight</code></a> and <code>discount</code> can serve similar purposes. Compared to <a href="#TimeStruct.objective_weight"><code>objective_weight</code></a>, <code>discount</code> only calculates the discount factor for a given time period. If <code>t</code> is an <a href="../internal/#TimeStruct.AbstractStrategicPeriod"><code>AbstractStrategicPeriod</code></a>, both are equivalent.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/discount.jl#L60-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TimeStruct.objective_weight" href="#TimeStruct.objective_weight"><code>TimeStruct.objective_weight</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">objective_weight(t::Union{TimePeriod,TimeStructurePeriod}, ts::TimeStructure, discount_rate; type = &quot;start&quot;, timeunit_to_year = 1.0)
objective_weight(t::Union{TimePeriod,TimeStructurePeriod}, disc::Discounter; type = &quot;start&quot;)</code></pre><p>Calculates the overall objective weight for a time period <code>t</code> using a fixed <code>discount_rate</code>. The weight consideres both discounting, the probability and potential multiplicity of <code>t</code> The function can be either called using a <a href="#TimeStruct.Discounter"><code>Discounter</code></a> type or by specifying the parameters (time structure <code>ts</code>, <code>discount_rate</code> and potentially <code>timeunit_to_year</code>) directly.</p><p>There are two types of discounting available:</p><ol><li><p>Discounting to the start of the strategic period containing the time period:</p><p>This can be achieved through specifying <code>type=&quot;start&quot;</code>. It is useful for investment costs</p></li><li><p>Discounting to the average of the over the whole strategic period:</p><p>The average can be calculated either as a continuous average (<code>type=&quot;avg&quot;</code>) or as a discrete average that discounts to the start of each year (<code>type=&quot;avg_year&quot;</code>). Average discounting is useful for operational costs.</p></li></ol><p>The <code>timeunit_to_year</code> parameter is used to convert the time units of strategic periods in the time structure to years (default value = 1.0).</p><div class="admonition is-success" id="Comparison-with-discount-9ae5a8de4170db2f"><header class="admonition-header">Comparison with `discount`<a class="admonition-anchor" href="#Comparison-with-discount-9ae5a8de4170db2f" title="Permalink"></a></header><div class="admonition-body"><p>Both <a href="#TimeStruct.discount"><code>discount</code></a> and <code>objective_weight</code> can serve similar purposes. Compared to <a href="#TimeStruct.discount"><code>discount</code></a>, <code>objective_weight</code> includes as well the probablity and multiplicity of a given time period. If <code>t</code> is an <a href="../internal/#TimeStruct.AbstractStrategicPeriod"><code>AbstractStrategicPeriod</code></a>, both are equivalent.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefore/TimeStruct.jl/blob/6ccbebec3b66198e7047d4a9a98b21e0fcfda96c/src/discount.jl#L134-L163">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../contribute/">« Contribute</a><a class="docs-footer-nextpage" href="../internal/">Internal reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Monday 3 November 2025 10:10">Monday 3 November 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
